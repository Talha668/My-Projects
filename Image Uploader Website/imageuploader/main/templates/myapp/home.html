<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Uploader</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" 
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body style="background-color: #e2e2e2;">
    <div class="container mt-4">
        <div class="py-5 text-center bg-secondary text-white rounded">
            <h1 class="mb-3">Image Upload</h1>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="d-flex justify-content-center align-items-center gap-2">
                    {{form}}
                    <input type="submit" class="btn btn-danger" value="Upload">
                </div>
            </form>
        </div>
        <div class="row mt-4">
            {% for x in img %}
            <div class="col-sm-4">
                <div class="card m-2 shadow-sm position-relative">
                    <!-- DELETE FORM - FIXED SYNTAX -->
                    <form method="post" class="position-absolute top-0 end-0 m-2">
                        {% csrf_token %}
                        <input type="hidden" name="delete_id" value="{{ x.id }}">
                        <button type="submit" class="btn btn-danger btn-sm rounded-circle" 
                                onclick="return confirm('Are you sure you want to delete this image?')"
                                style="width: 30px; height: 30px; padding: 0; display: flex; align-items: center; justify-content: center;">
                            Ã—
                        </button>
                    </form>
                    
                    <img src="{{ x.photo.url }}" alt="" class="card-img-top" height="200px" style="object-fit: cover;">
                    <div class="card-footer">
                        <small class="text-muted">{{ x.date }}</small>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>